{"version":3,"sources":["pages/Login/Login.module.scss","pages/Login/Login.js","components/Button/Button.js","hooks/useHttp.js","components/SecTitle/SecTitle.js","components/Button/btn.module.scss","components/SecTitle/SecTitle.module.scss","components/ShBox/ShBox.js","components/ShBox/ShBox.module.scss","components/RegInput/RegInput.js","components/RegInput/RegInput.module.scss"],"names":["module","exports","Login","useWindowSize","width","useState","username","setUsername","password","setPassword","potentialError","setPotentionalError","buttonDisabled","setButtonDisabled","history","useHistory","login","useContext","authContext","useHttp","request","loading","useEffect","localLogin","e","a","preventDefault","email","response","status","push","console","log","message","className","styles","loginContainer","padding","parseInt","widths","break_md","title","baseRegForm","id","type","value","onChange","target","label","name","required","error","text","disabled","onClick","loginMes","to","Button","filled","disabledButton","loadingButton","filledButton","plainButton","setLoading","setError","useCallback","url","method","body","headers","presentation_link","fetch","JSON","stringify","json","data","ok","Error","clearError","SecTitle","align","secTitle","style","textAlign","ShBox","props","shBox","borderRadius","children","RegInput","theme","minLength","maxlength","placeholder","visible","setVisible","edit","setEdit","regInputWrap","profInputWrap","htmlFor","inputLabel","regDisabled","regInput","maxLength","seePassword","backgroundImage","inputError"],"mappings":"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","file":"static/js/15.d082513b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"break-xs\":\"560px\",\"break_sm\":\"576px\",\"break_md\":\"768px\",\"break_lg\":\"992px\",\"break_lm\":\"1100px\",\"break_xl\":\"1200px\",\"baseRegForm\":\"Login_baseRegForm__NyOFy\",\"confPols\":\"Login_confPols__1XmYw\",\"confPolsDesc\":\"Login_confPolsDesc__35kXQ\",\"loginMes\":\"Login_loginMes__1UwIb\",\"loginContainer\":\"Login_loginContainer__1JWOj\"};","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useHttp } from \"../../hooks/useHttp\";\r\nimport Button from \"../../components/Button/Button\";\r\nimport RegInput from \"../../components/RegInput/RegInput\";\r\nimport SecTitle from \"../../components/SecTitle/SecTitle\";\r\nimport ShBox from \"../../components/ShBox/ShBox\";\r\nimport useWindowSize from \"../../hooks/useWindowSize\";\r\nimport widths from \"../../assets/scss/_widths.scss\";\r\n\r\nimport styles from \"./Login.module.scss\";\r\nimport authContext from \"../../context/auth.context\";\r\n\r\nconst Login = () => {\r\n  const [width] = useWindowSize();\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [potentialError, setPotentionalError] = useState(\"\");\r\n  const [buttonDisabled, setButtonDisabled] = useState(true);\r\n  const history = useHistory();\r\n  const { login } = useContext(authContext);\r\n  const { request, loading } = useHttp();\r\n  useEffect(() => {\r\n    username === \"\"\r\n      ? setButtonDisabled(true)\r\n      : password === \"\"\r\n      ? setButtonDisabled(true)\r\n      : setButtonDisabled(false);\r\n  }, [password, username]);\r\n\r\n  const localLogin = async (e) => {\r\n    try {\r\n      setPotentionalError(\"\");\r\n      e.preventDefault();\r\n      const response = await request(\r\n        \"/api/v1.0/auth/user/login\",\r\n        \"POST\",\r\n        { email: username, password },\r\n        {}\r\n      );\r\n      if (response.status === 200) {\r\n        login(response);\r\n        history.push(\"/user\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setPotentionalError(error.message);\r\n    }\r\n  };\r\n  return (\r\n    <main className={\"container\"}>\r\n      <div className={styles.loginContainer}>\r\n        <ShBox\r\n          padding={width < parseInt(widths.break_md) ? \"0.5em 0\" : \"2em 0\"}\r\n        >\r\n          <SecTitle title={\"Вход в аккаунт\"} />\r\n          <form className={styles.baseRegForm} id={\"login-form\"}>\r\n            <RegInput\r\n              type={\"email\"}\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n              label={\"E-mail\"}\r\n              name={\"email\"}\r\n              required={true}\r\n            />\r\n            <RegInput\r\n              type={\"password\"}\r\n              label={\"Пароль\"}\r\n              name={\"password\"}\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              error={potentialError}\r\n            />\r\n            <Button\r\n              type={\"submit\"}\r\n              text={\"Войти\"}\r\n              disabled={buttonDisabled}\r\n              loading={loading}\r\n              onClick={localLogin}\r\n            />\r\n          </form>\r\n          <div className={styles.loginMes}>\r\n            Нет аккаунта? <Link to=\"/register\">Зарегистрироваться</Link>\r\n          </div>\r\n        </ShBox>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport styles from \"./btn.module.scss\";\r\n\r\nconst Button = ({\r\n  text,\r\n  filled = true,\r\n  onClick = () => true,\r\n  disabled = false,\r\n  type,\r\n  loading,\r\n}) => {\r\n  return (\r\n    <button\r\n      type={type}\r\n      className={\r\n        disabled\r\n          ? styles.disabledButton\r\n          : loading\r\n          ? styles.loadingButton\r\n          : filled\r\n          ? styles.filledButton\r\n          : styles.plainButton\r\n      }\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n    >\r\n      {text}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import { useState, useCallback } from \"react\";\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const request = useCallback(\r\n    async (url, method = \"GET\", body = null, headers = {}) => {\r\n      setLoading(true);\r\n      try {\r\n        if (body) {\r\n          headers[\"Content-Type\"] = \"application/json\";\r\n          headers[\"Accept\"] = \"application/json\";\r\n        }\r\n        const presentation_link = \"https://api.beautylinks.com\"; //  replace this with ngrok when nessesary\r\n        const response = await fetch(presentation_link + url, {\r\n          method,\r\n          body: body ? JSON.stringify(body) : null,\r\n          headers,\r\n        });\r\n        console.log(response);\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            data.message ||\r\n              \"Something went wrong. Check your internet connection.\"\r\n          );\r\n        }\r\n\r\n        setLoading(false);\r\n        return { ...data, status: response.status };\r\n      } catch (e) {\r\n        setLoading(false);\r\n        setError(e.message);\r\n        throw e;\r\n      }\r\n    },\r\n    []\r\n  );\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n  return { loading, request, error, clearError };\r\n};\r\n","import React from \"react\";\r\n\r\nimport styles from \"./SecTitle.module.scss\";\r\n\r\nconst SecTitle = ({ title, align = \"center\" }) => {\r\n  return (\r\n    <h2 className={styles.secTitle} style={{ textAlign: align }}>\r\n      {title}\r\n    </h2>\r\n  );\r\n};\r\n\r\nexport default SecTitle;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"break-xs\":\"560px\",\"break_sm\":\"576px\",\"break_md\":\"768px\",\"break_lg\":\"992px\",\"break_lm\":\"1100px\",\"break_xl\":\"1200px\",\"filledButton\":\"btn_filledButton__2I0A7\",\"plainButton\":\"btn_plainButton__dNEOV\",\"loadingButton\":\"btn_loadingButton__2Nqzw\",\"disabledButton\":\"btn_disabledButton__2Adg1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"break-xs\":\"560px\",\"break_sm\":\"576px\",\"break_md\":\"768px\",\"break_lg\":\"992px\",\"break_lm\":\"1100px\",\"break_xl\":\"1200px\",\"secTitle\":\"SecTitle_secTitle__1f_xj\"};","import React from \"react\";\r\n\r\nimport styles from \"./ShBox.module.scss\";\r\n\r\nconst ShBox = (props) => {\r\n  return (\r\n    <div\r\n      className={styles.shBox}\r\n      style={{\r\n        padding: props.padding,\r\n        borderRadius: props.borderRadius || \"0.7em\",\r\n      }}\r\n    >\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShBox;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"break-xs\":\"560px\",\"break_sm\":\"576px\",\"break_md\":\"768px\",\"break_lg\":\"992px\",\"break_lm\":\"1100px\",\"break_xl\":\"1200px\",\"shBox\":\"ShBox_shBox__2Fs4b\"};","import React, { useState } from \"react\";\r\n\r\nimport styles from \"./RegInput.module.scss\";\r\n\r\nconst RegInput = ({\r\n  theme = \"reg\",\r\n  label,\r\n  name,\r\n  type = \"text\",\r\n  required = false,\r\n  disabled = false,\r\n  minLength = 0,\r\n  maxlength = 200,\r\n  title = \"\",\r\n  error = null,\r\n  value,\r\n  onChange,\r\n  placeholder = \"\",\r\n}) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const [edit, setEdit] = useState(false);\r\n\r\n  return (\r\n    <div\r\n      className={theme === \"reg\" ? styles.regInputWrap : styles.profInputWrap}\r\n    >\r\n      <label htmlFor={name} className={styles.inputLabel}>\r\n        {label}\r\n      </label>\r\n\r\n      <input\r\n        type={visible ? \"text\" : type}\r\n        id={name}\r\n        name={name}\r\n        className={disabled ? styles.regDisabled : styles.regInput}\r\n        minLength={minLength}\r\n        maxLength={maxlength}\r\n        title={title}\r\n        required={required}\r\n        value={value}\r\n        onChange={onChange}\r\n        placeholder={placeholder}\r\n        disabled={theme === \"prof\" ? !edit : disabled}\r\n      />\r\n\r\n      {type === \"password\" && (\r\n        <div\r\n          className={styles.seePassword}\r\n          onClick={() => setVisible(!visible)}\r\n          style={\r\n            !visible\r\n              ? { backgroundImage: `url('/assets/img/icons/unvis.png')` }\r\n              : { backgroundImage: `url('/assets/img/icons/vis.png')` }\r\n          }\r\n        ></div>\r\n      )}\r\n      {theme === \"prof\" && (\r\n        <div\r\n          className={styles.edit}\r\n          onClick={() => setEdit(!edit)}\r\n          style={\r\n            !edit\r\n              ? {\r\n                  backgroundImage: `url('/assets/img/icons/edit-disabled.png')`,\r\n                }\r\n              : { backgroundImage: `url('/assets/img/icons/edit-enabled.png')` }\r\n          }\r\n        ></div>\r\n      )}\r\n      {error && <span className={styles.inputError}>{error}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RegInput;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"regInputWrap\":\"RegInput_regInputWrap__JHvJ8\",\"inputLabel\":\"RegInput_inputLabel__2WyoC\",\"regInput\":\"RegInput_regInput__2yTcf\",\"regDisabled\":\"RegInput_regDisabled__1TVZX\",\"inputError\":\"RegInput_inputError__7H97G\",\"seePassword\":\"RegInput_seePassword__3bfVI\",\"profInputWrap\":\"RegInput_profInputWrap__1RqQn\",\"edit\":\"RegInput_edit__knPmD\"};"],"sourceRoot":""}