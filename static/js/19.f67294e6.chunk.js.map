{"version":3,"sources":["pages/UserProfile/MasterLocations/MasterLocations.module.scss","pages/UserProfile/MasterLocations/CustomMap.js","pages/UserProfile/MasterLocations/MasterLocations.js","components/Button/Button.js","hooks/useHttp.js","components/Button/btn.module.scss","components/ProfileTitle/ProfileTitle.js","components/ProfileTitle/ProfileTitle.module.scss"],"names":["module","exports","CustomMap","props","useLoadScript","googleMapsApiKey","process","REACT_APP_API_GMAPS","isLoaded","loadError","mapContainerStyle","width","height","zoom","center","marker","onClick","sendLocation","clickable","position","icon","url","scaledSize","window","google","maps","Size","Preloader","MasterLocations","useState","currentLocation","setCurrentLocation","locationUpdated","setLocationUpdated","useHttp","request","loading","token","useContext","authContext","setLocalLocation","location","a","latLng","lat","lng","response","status","newAddress","country_name","results","address_components","filter","el","types","includes","long_name","country_id","short_name","city","address","postcode","salon","fetchLocation","useCallback","Authorization","console","log","alert","useEffect","className","styles","basicsWrap","ProfileTitle","title","subTitle","mapContainer","Button","text","filled","disabled","type","disabledButton","loadingButton","filledButton","plainButton","setLoading","error","setError","method","body","headers","presentation_link","fetch","JSON","stringify","json","data","ok","Error","message","clearError","titleWrap"],"mappings":"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","file":"static/js/19.f67294e6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapContainer\":\"MasterLocations_mapContainer__2qtBt\",\"address\":\"MasterLocations_address__1ubi_\"};","import React from \"react\";\r\nimport { GoogleMap, Marker, useLoadScript } from \"@react-google-maps/api\";\r\nimport Preloader from \"../../../components/Preloader/Preloader\";\r\n\r\nconst CustomMap = (props) => {\r\n  const { isLoaded, loadError } = useLoadScript({\r\n    googleMapsApiKey: process.env.REACT_APP_API_GMAPS,\r\n  });\r\n  if (loadError) {\r\n    return <div>error</div>;\r\n  }\r\n  if (!isLoaded) {\r\n    return <Preloader />;\r\n  }\r\n  return (\r\n    <GoogleMap\r\n      mapContainerStyle={{ width: \"100%\", height: \"100%\" }}\r\n      zoom={18}\r\n      center={props.marker}\r\n      onClick={props.sendLocation}\r\n    >\r\n      <Marker\r\n        clickable={false}\r\n        position={props.marker}\r\n        icon={{\r\n          url: \"/assets/img/mapMarker.svg\",\r\n          scaledSize: new window.google.maps.Size(50, 50),\r\n        }}\r\n      />\r\n    </GoogleMap>\r\n  );\r\n};\r\n\r\nexport default CustomMap;\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport Preloader from \"../../../components/Preloader/Preloader\";\r\n\r\nimport ProfileTitle from \"../../../components/ProfileTitle/ProfileTitle\";\r\nimport Button from \"../../../components/Button/Button\";\r\nimport authContext from \"../../../context/auth.context\";\r\nimport { useHttp } from \"../../../hooks/useHttp\";\r\nimport CustomMap from \"./CustomMap\";\r\n\r\nimport styles from \"./MasterLocations.module.scss\";\r\n\r\nconst MasterLocations = (props) => {\r\n  const [currentLocation, setCurrentLocation] = useState(null);\r\n  const [locationUpdated, setLocationUpdated] = useState(false);\r\n  const { request, loading } = useHttp();\r\n  const { token } = useContext(authContext);\r\n\r\n  const setLocalLocation = async (location) => {\r\n    try {\r\n      setLocationUpdated(true);\r\n      const response = await request(\r\n        `https://maps.googleapis.com/maps/api/geocode/json?latlng=${location.latLng.lat()},${location.latLng.lng()}&key=${\r\n          process.env.REACT_APP_API_GMAPS\r\n        }&language=en&region=UA`\r\n      );\r\n      delete response.status;\r\n      const newAddress = {\r\n        country_name: response.results[0].address_components.filter((el) =>\r\n          el.types.includes(\"country\")\r\n        )[0]?.long_name,\r\n        country_id: response.results[0].address_components.filter((el) =>\r\n          el.types.includes(\"country\")\r\n        )[0]?.short_name,\r\n        city: response.results[0].address_components.filter((el) =>\r\n          el.types.includes(\"locality\")\r\n        )[0]?.long_name,\r\n        address: `${\r\n          response.results[0].address_components.filter((el) =>\r\n            el.types.includes(\"route\")\r\n          )[0]?.long_name\r\n        }, ${\r\n          response.results[0].address_components.filter((el) =>\r\n            el.types.includes(\"street_number\")\r\n          )[0]?.long_name\r\n        }`,\r\n        postcode: response.results[0].address_components.filter((el) =>\r\n          el.types.includes(\"postal_code\")\r\n        )[0]?.long_name,\r\n      };\r\n      setCurrentLocation((currentLocation) => ({\r\n        ...currentLocation,\r\n        salon: {\r\n          ...currentLocation.salon,\r\n          address: {\r\n            ...newAddress,\r\n            location: {\r\n              lat: location.latLng.lat(),\r\n              lng: location.latLng.lng(),\r\n            },\r\n          },\r\n        },\r\n      }));\r\n    } catch (error) {}\r\n  };\r\n  const fetchLocation = useCallback(async () => {\r\n    try {\r\n      const response = await request(\r\n        \"/api/v1.0/profile/master/locationtypes\",\r\n        \"GET\",\r\n        null,\r\n        {\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      );\r\n      delete response.status;\r\n      setCurrentLocation(response);\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(error);\r\n    }\r\n  }, [request, token]);\r\n  const sendLocation = async () => {\r\n    try {\r\n      const response = await request(\r\n        \"/api/v1.0/profile/master/locationtypes\",\r\n        \"PUT\",\r\n        currentLocation,\r\n        {\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      );\r\n      if (response.status === 200) {\r\n        setLocationUpdated(false);\r\n        alert(\"Данные успешно сохранены!\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    const location = fetchLocation();\r\n    setCurrentLocation(location);\r\n  }, [fetchLocation]);\r\n\r\n  return (\r\n    <div className={styles.basicsWrap}>\r\n      <ProfileTitle\r\n        title={\"Локации\"}\r\n        subTitle={\"Укажите своё местоположение на карте\"}\r\n      />\r\n      {loading ? (\r\n        <Preloader />\r\n      ) : (\r\n        <>\r\n          <div\r\n            className={styles.address}\r\n          >{`${currentLocation?.salon?.address?.country_name}, ${currentLocation?.salon?.address?.city}, ${currentLocation?.salon?.address?.address}, ${currentLocation?.salon?.address?.postcode}`}</div>\r\n          <div className={styles.mapContainer}>\r\n            <CustomMap\r\n              marker={currentLocation?.salon?.address?.location}\r\n              sendLocation={setLocalLocation}\r\n            />\r\n          </div>\r\n        </>\r\n      )}\r\n      {locationUpdated && <Button text={\"Сохранить\"} onClick={sendLocation} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MasterLocations;\r\n","import React from \"react\";\r\nimport styles from \"./btn.module.scss\";\r\n\r\nconst Button = ({\r\n  text,\r\n  filled = true,\r\n  onClick = () => true,\r\n  disabled = false,\r\n  type,\r\n  loading,\r\n}) => {\r\n  return (\r\n    <button\r\n      type={type}\r\n      className={\r\n        disabled\r\n          ? styles.disabledButton\r\n          : loading\r\n          ? styles.loadingButton\r\n          : filled\r\n          ? styles.filledButton\r\n          : styles.plainButton\r\n      }\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n    >\r\n      {text}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import { useState, useCallback } from \"react\";\r\n\r\nexport const useHttp = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const request = useCallback(\r\n    async (url, method = \"GET\", body = null, headers = {}) => {\r\n      setLoading(true);\r\n      try {\r\n        if (body) {\r\n          headers[\"Content-Type\"] = \"application/json\";\r\n          headers[\"Accept\"] = \"application/json\";\r\n        }\r\n        const presentation_link = \"https://api.beautylinks.com\"; //  replace this with ngrok when nessesary\r\n        const response = await fetch(presentation_link + url, {\r\n          method,\r\n          body: body ? JSON.stringify(body) : null,\r\n          headers,\r\n        });\r\n        console.log(response);\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n          throw new Error(\r\n            data.message ||\r\n              \"Something went wrong. Check your internet connection.\"\r\n          );\r\n        }\r\n\r\n        setLoading(false);\r\n        return { ...data, status: response.status };\r\n      } catch (e) {\r\n        setLoading(false);\r\n        setError(e.message);\r\n        throw e;\r\n      }\r\n    },\r\n    []\r\n  );\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n  return { loading, request, error, clearError };\r\n};\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"break-xs\":\"560px\",\"break_sm\":\"576px\",\"break_md\":\"768px\",\"break_lg\":\"992px\",\"break_lm\":\"1100px\",\"break_xl\":\"1200px\",\"filledButton\":\"btn_filledButton__2I0A7\",\"plainButton\":\"btn_plainButton__dNEOV\",\"loadingButton\":\"btn_loadingButton__2Nqzw\",\"disabledButton\":\"btn_disabledButton__2Adg1\"};","import React from \"react\";\r\n\r\nimport styles from \"./ProfileTitle.module.scss\";\r\n\r\nconst ProfileTitle = ({ title, subTitle }) => {\r\n  return (\r\n    <div className={styles.titleWrap}>\r\n      <h3 className={styles.title}>{title}</h3>\r\n      <h4 className={styles.subTitle}>{subTitle}</h4>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileTitle;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"break-xs\":\"560px\",\"break_sm\":\"576px\",\"break_md\":\"768px\",\"break_lg\":\"992px\",\"break_lm\":\"1100px\",\"break_xl\":\"1200px\",\"titleWrap\":\"ProfileTitle_titleWrap__sURJO\",\"title\":\"ProfileTitle_title__2dCYb\",\"subTitle\":\"ProfileTitle_subTitle__OBGgs\"};"],"sourceRoot":""}